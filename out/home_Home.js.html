<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: home/Home.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: home/Home.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { useCallback } from "react";
import { Switch, Route, useHistory } from "react-router-dom";
import { CreateOrder } from "../orders/components/CreateOrder";
import OrderList from "../orders/components/OrderList";
import { TravelPlan } from "../travel/components/TravelPlan";
import { Footer } from "../../shared/components/Footer";
import { Header } from "../../shared/components/Header";
import { useSelector, useDispatch } from "react-redux";
import { loginSuccessful } from "../../redux/reducers/loginReducer";
import { googleSignIn } from "../../shared/api/login";
import Intro from "../Intro";
import { TravelList } from "../travel/components/TravelList";
import { DeliveryList } from "../delivery/components/DeliveryList";
import NotFound from "../404/NotFound";
import VolunteerList from "../volunteer/components/VolunteerList";
import GuardedRoute from "../route-guard/GuardedRoute";
import TrackOrders from "../track/TrackOrders";
import { createApi } from "../../shared/api/crud";
import { logger } from "@sentry/utils";



/**
 * Render Landing Page with all the initial routes
 * @returns {JSX} Component with all the routes 
 */
const Home = () => {


  /** Initialize History object for routing */
  let history = useHistory();


  /** Initialize Dispatch object for firing events */
  const dispatch = useDispatch();


  /** Initilaize local state from Redux Store */
  const isLoggedIn = useSelector(({login}) => login?.isLoggedIn);
  const user = useSelector(({login}) => login?.user);


  /** Handler for User Sign In*/
  const handleSignIn = useCallback(async () => {

    /** API request from Google Auth*/
    const user = await googleSignIn().catch(err => logger.error("Sign In Failed", err));

    if (user) {

      dispatch(loginSuccessful(user));

      history.push("/order-list");

    } else history.push("/");
    
  }, [dispatch, history]);



  /** Handler for Guest Sign In */
  const handleGuestLogin = async () => {

    /** initialize guest user object  */
    const guestUser = {
      id: "guest140994",
      name: "Charlotte Andrea",
      email: "charlotte.andrea@gmail.com",
    };


    /** API request*/
    const response = await createApi(guestUser, "login").catch(err => logger.error("Create User Failed", err));

    if (response) {

      dispatch(loginSuccessful(user));

      history.push("/order-list");
      
    } else history.push("/");

  };



  return (
    &lt;React.Fragment>
      &lt;Header
        isLoggedIn={isLoggedIn}
        handleOnClick={handleSignIn}
        handleGuestLogin={handleGuestLogin}
        userName={user.name}
      />
      &lt;Switch>
        &lt;GuardedRoute path="/order" component={CreateOrder} auth={isLoggedIn} />
        &lt;GuardedRoute
          path="/order-list"
          component={OrderList}
          auth={isLoggedIn}
        />
        &lt;GuardedRoute path="/travel" component={TravelPlan} auth={isLoggedIn} />
        &lt;GuardedRoute
          path="/travel-list"
          component={TravelList}
          auth={isLoggedIn}
        />
        &lt;GuardedRoute
          path="/delivery-list"
          component={DeliveryList}
          auth={isLoggedIn}
        />
        &lt;GuardedRoute
          path="/volunteer-list"
          component={VolunteerList}
          auth={isLoggedIn}
        />
        &lt;GuardedRoute
          path="/track-orders/:orderId"
          component={TrackOrders}
          auth={isLoggedIn}
        />
        &lt;Route path="/" component={() => &lt;Intro />} />
        &lt;Route default component={NotFound} />
      &lt;/Switch>
      &lt;Footer position="relative" bottom="0" mt={40} />
    &lt;/React.Fragment>
  );
};

export default Home;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#Home">Home</a></li><li><a href="global.html#NotFound">NotFound</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Sat Oct 09 2021 06:14:00 GMT+0530 (India Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
